pipeline {
    agent any 
    stages {
        stage('execute') {
            steps {
                script {
                     sh '''
                     ssh -i /var/lib/jenkins/keys/dev.pem ec2-user@3.134.7.94 << EOF
                     mkdir -p /tmp/shaheena
                     cd /tmp/shaheena
                     curl -u admin:admin -O http://67.202.11.212:8081/repository/UI-builds/qa/UI-${QA_UI_BUILD_ID}.tar
                     tar -xvf UI-${QA_UI_BUILD_ID}.tar
                     cat index.html
                     sudo cp index.html /var/www/html
                     
                    
                     
                     echo "*** Restarting httpd ***"
	sudo service httpd status
	sudo service httpd restart
	sudo service httpd status
	ps -ef | grep httpd 
	date
                     
                     
EOF
'''
                    
                }
                
                
            }
            
        }
        
        
    }
    parameters {
        string(name: 'QA_UI_BUILD_ID', defaultValue: 'null', description: "qa environment")
        
    }
}
